{"id":"zignocchio-05ef","content_hash":"81781486be6125b448172b24eb3fd6c166e760d6ece137a7f3a74c97cddcab89","title":"Implement MintTo and MintToChecked instructions","description":"Create token/instructions/mint_to.zig with MintTo (discriminator=7) and MintToChecked (discriminator=14). MintTo: mint, account, authority, amount. MintToChecked adds decimals validation. Support invokeSigned for PDA mint authorities.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T15:27:19.162235685+01:00","updated_at":"2025-11-06T18:36:04.237486335+01:00","closed_at":"2025-11-06T18:36:04.237486335+01:00","dependencies":[{"issue_id":"zignocchio-05ef","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:27:19.163837606+01:00","created_by":"daemon"},{"issue_id":"zignocchio-05ef","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T15:27:19.164927051+01:00","created_by":"daemon"}]}
{"id":"zignocchio-0b0e","content_hash":"eecc63da0751df4591b61c95dacee9be2437e1dd418b2871cd76e63417a843b3","title":"Vault CPI causes access violation during deposit","description":"Vault program compiles and passes all validation checks, but crashes with access violation when executing CPI to System Program during deposit instruction. The program completes validation, logs the deposit amount correctly, then fails with 'Access violation in program section at address 0x100001a85 of size 68' when attempting the transfer.","design":"Error occurs after validation passes:\\n1. Program logs 'Vault program: Starting'\\n2. Routes to deposit (discriminator 0)\\n3. Logs 'Deposit: Starting'\\n4. Logs 'Deposit: Validated accounts and data'\\n5. Logs deposit amount (0xbebc200 = 200000000 lamports)\\n6. CRASH: Access violation when invoking System Program transfer\\n\\nThe access violation happens during sdk.invoke() call in deposit.zig:143\\n\\nPossible causes:\\n- Instruction struct layout incorrect for sBPF\\n- Account metas array not properly aligned\\n- CPI instruction data format wrong\\n- Pointer casting issue in invoke implementation\\n\\nCompute units consumed: 3538/200000 (very early failure)","acceptance_criteria":"- [ ] Deposit CPI completes without access violation\\n- [ ] Lamports successfully transfer from owner to vault\\n- [ ] All vault tests pass\\n- [ ] No access violations in withdraw CPI","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T12:40:44.717901171+01:00","updated_at":"2025-11-06T13:39:25.499346895+01:00","closed_at":"2025-11-06T13:39:25.499346895+01:00"}
{"id":"zignocchio-0dea","content_hash":"b64c67197b3cd1d19151db830a4bca5c847e70cfdeb3190c09ee35e06a26d505","title":"Implement TokenAccount state structure","description":"Create token/account.zig with TokenAccount struct matching SPL Token layout (165 bytes). Include methods: fromAccountInfo, mint, owner, amount, delegate, state, isNative, nativeAmount, closeAuthority. Handle optional fields with flag checks.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T15:25:25.431821044+01:00","updated_at":"2025-11-06T18:20:15.138497648+01:00","closed_at":"2025-11-06T18:20:15.138497648+01:00","dependencies":[{"issue_id":"zignocchio-0dea","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:25:25.434003601+01:00","created_by":"daemon"}]}
{"id":"zignocchio-1825","content_hash":"fece6b3d5d89d086b59c22dd3f9403e406f861165faefec0047ab8e49f43167e","title":"Withdraw test fails with PDA signing error","description":"Fixed: The issue was in sdk/pda.zig. Both findProgramAddress and createProgramAddress were incorrectly passing Zig slices directly to syscalls instead of converting them to the C ABI SolSignerSeed structures. The invokeSigned function in cpi.zig was doing this correctly, but the PDA functions were not. This caused intermittent failures when the memory layout happened to be incompatible.","design":"Error occurs during invokeSigned CPI call in withdraw.zig. The seeds being used are: ['vault', owner_pubkey, bump]. The issue only manifests in the standalone withdraw test, not in the full cycle test. Need to investigate if the vault PDA from the deposit test is being correctly found/used in the withdraw test.","acceptance_criteria":"- [ ] Standalone withdraw test passes\n- [ ] Withdraw correctly uses PDA from deposit test  \n- [ ] All vault tests pass in sequence","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-06T14:07:57.310763606+01:00","updated_at":"2025-11-06T14:47:58.042263117+01:00","closed_at":"2025-11-06T14:47:58.042263117+01:00"}
{"id":"zignocchio-19e6","content_hash":"b9b221a68c21d2fe7de6bd73a9c566658fec93bbe795bdbcc191accbe377075c","title":"Implement TransferChecked instruction","description":"Create token/instructions/transfer_checked.zig implementing TransferChecked with additional mint account and decimals validation. Accounts: source, mint, destination, authority. Instruction data: discriminator=12, amount (u64), decimals (u8).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T15:26:13.369981198+01:00","updated_at":"2025-11-06T18:39:38.711447537+01:00","closed_at":"2025-11-06T18:39:38.711447537+01:00","dependencies":[{"issue_id":"zignocchio-19e6","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:26:13.371932037+01:00","created_by":"daemon"},{"issue_id":"zignocchio-19e6","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T15:26:13.372857673+01:00","created_by":"daemon"}]}
{"id":"zignocchio-364c","content_hash":"3a785a4a3a4007cb45f13e15c01d7b511cd4b1aba8a36401bcc75a79024565a0","title":"Create Jest tests for token-vault example","description":"## BLOCKED: TOKEN_PROGRAM_ID Global Constant Reference Bug\n\nToken-vault program crashes when referencing sdk.token.TOKEN_PROGRAM_ID global constant.\n\n### üìö Complete Documentation Created\n\n**Start Here:**\n- TOKEN_PROGRAM_ID_README.md - Overview and navigation\n- TOKEN_PROGRAM_ID_BUG_SUMMARY.md - One-page quick reference\n- TOKEN_PROGRAM_ID_TEST_PLAN.md - Step-by-step test plan\n\n**Deep Dive:**\n- DEBUG_TOKEN_PROGRAM_ID.md - Complete investigation (200+ lines)\n\n### üéØ The Problem\n\nReferencing `\u0026sdk.token.TOKEN_PROGRAM_ID` causes instant crash:\n- Error: \"invalid utf-8 sequence\" (misleading - shows TOKEN_PROGRAM_ID bytes)\n- Crash at 185 CU (during program load phase)\n- Zero logs appear (crash before any execution)\n\n### üß™ Minimal Reproduction\n\nCreated test_handler.zig (discriminator 99) that ONLY references the constant:\n```zig\nconst token_program_id = \u0026sdk.token.TOKEN_PROGRAM_ID;\n```\nResult: Immediate crash, same error.\n\nTest: `npm test -- examples/token-vault.test.ts -t \"test handler\"`\n\n### ‚úÖ What Works\n- Counter example (no TOKEN_PROGRAM_ID references) - all tests pass\n- Inline constants (SYSTEM_PROGRAM_ID in initialize.zig)\n- Handler routing and function entry\n- 4KB stack configuration (zignocchio-4ac3 completed)\n\n### ‚ùå What Fails\n- ANY reference to \u0026sdk.token.TOKEN_PROGRAM_ID\n- In deposit.zig, withdraw.zig, initialize.zig, test_handler.zig\n- Across all usage patterns\n\n### üî¨ Root Cause Hypothesis\n\n**BPF global constant relocation issue:**\n- LLVM BPF backend doesn't properly handle Zig's global const across compilation units\n- Linker may not correctly relocate constant addresses\n- Runtime interprets malformed address as invalid data\n\nLocation: sdk/token/mod.zig:18\n\n### üöÄ Next Steps (Priority Order)\n\n1. **Test inline constant workaround** (5-10 min, 90% success chance)\n2. **Test function instead of constant** (if #1 fails)\n3. **Examine LLVM IR** (compare vault vs counter)\n4. **Debug sbpf-linker** (check relocations)\n5. **Report to Zig/LLVM** (if confirmed as backend bug)\n\nSee TOKEN_PROGRAM_ID_TEST_PLAN.md for detailed steps.\n\n### üìÅ Files\n\n**Documentation:**\n- TOKEN_PROGRAM_ID_README.md - Start here\n- TOKEN_PROGRAM_ID_BUG_SUMMARY.md - Quick ref\n- TOKEN_PROGRAM_ID_TEST_PLAN.md - Action plan\n- DEBUG_TOKEN_PROGRAM_ID.md - Full analysis\n\n**Code:**\n- examples/token-vault/test_handler.zig - Minimal test\n- examples/token-vault.test.ts - Test for discriminator 99\n- examples/token-vault/lib.zig - Routing (modified)\n\n### Dependencies\n\n- Blocks: zignocchio-6f4e (SPL Token support)\n- Depends: zignocchio-4ac3 (4KB stack) - COMPLETED, not root cause","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-11-06T19:09:47.799769037+01:00","updated_at":"2025-11-06T20:47:16.110132281+01:00","dependencies":[{"issue_id":"zignocchio-364c","depends_on_id":"zignocchio-4ac3","type":"blocks","created_at":"2025-11-06T19:20:57.841566844+01:00","created_by":"daemon"}]}
{"id":"zignocchio-3a4d","content_hash":"35615b910b05090eb1e14b53ea88f4faad27400c7b80bb1aa4d93d5c574c6b6a","title":"Create comprehensive token lifecycle example","description":"Create examples/token-lifecycle/ demonstrating full token lifecycle: create mint with authorities, initialize accounts, mint tokens, approve delegate, transfer via delegate, revoke delegate, burn tokens, and close accounts. Include both regular and checked instruction variants.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-06T16:22:04.910363155+01:00","updated_at":"2025-11-06T18:43:59.923680162+01:00","closed_at":"2025-11-06T18:43:59.923680162+01:00","dependencies":[{"issue_id":"zignocchio-3a4d","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T16:22:04.912377564+01:00","created_by":"daemon"},{"issue_id":"zignocchio-3a4d","depends_on_id":"zignocchio-8c15","type":"blocks","created_at":"2025-11-06T16:22:04.913289865+01:00","created_by":"daemon"},{"issue_id":"zignocchio-3a4d","depends_on_id":"zignocchio-05ef","type":"blocks","created_at":"2025-11-06T16:22:04.914173531+01:00","created_by":"daemon"},{"issue_id":"zignocchio-3a4d","depends_on_id":"zignocchio-f23b","type":"blocks","created_at":"2025-11-06T16:22:04.915075773+01:00","created_by":"daemon"},{"issue_id":"zignocchio-3a4d","depends_on_id":"zignocchio-3cc1","type":"blocks","created_at":"2025-11-06T16:22:04.91599167+01:00","created_by":"daemon"}]}
{"id":"zignocchio-3cc1","content_hash":"09eef5e43925e06344f48f44b4ebdf9239340aea47e4a488e26954b66296bfc6","title":"Implement Approve and ApproveChecked instructions","description":"Create token/instructions/approve.zig with Approve (discriminator=4) and ApproveChecked (discriminator=13). Approve delegates authority over tokens. Accounts: source, delegate, owner. ApproveChecked adds mint and decimals validation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T15:27:50.859448432+01:00","updated_at":"2025-11-07T11:59:47.648377534+01:00","closed_at":"2025-11-07T11:59:47.648377534+01:00","dependencies":[{"issue_id":"zignocchio-3cc1","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:27:50.861139302+01:00","created_by":"daemon"},{"issue_id":"zignocchio-3cc1","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T15:27:50.862202747+01:00","created_by":"daemon"}]}
{"id":"zignocchio-3e4d","content_hash":"d8fe9253ca9bf8fc05614e9d551d3b43b57e4d121a24d04e9458550c0499cffc","title":"sbpf-linker fails with LlvmDiagnosticError on vault example","description":"After vault compiles to bitcode successfully, sbpf-linker fails with 'SbpfLinkerError(LlvmDiagnosticError)' when trying to link. Hello and counter examples build fine, so this is specific to vault's CPI usage.","design":"Vault uses CPI to System Program for lamport transfers. Bitcode generation succeeds (entrypoint.bc is 13KB). Linker command: sbpf-linker --cpu v2 --export entrypoint -o zig-out/lib/program_name.so entrypoint.bc","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T09:43:56.843563078+01:00","updated_at":"2025-11-06T12:37:44.794200302+01:00","closed_at":"2025-11-06T12:37:44.794200302+01:00","dependencies":[{"issue_id":"zignocchio-3e4d","depends_on_id":"zignocchio-6780","type":"blocks","created_at":"2025-11-06T09:44:19.351224695+01:00","created_by":"daemon"}]}
{"id":"zignocchio-48aa","content_hash":"916436be6a5fbf6bea4b822aa2ff206f3b52948af72724d5bc89ea9472243b21","title":"Full cycle test assertion too strict for transaction fees","description":"The full cycle test expects network fees to be less than 10,000 lamports (0.00001 SOL), but the actual fee is exactly 10,000 lamports. The test assertion uses toBeLessThan(10_000) when it should use toBeLessThanOrEqual(10_000). The test functionality is working correctly - deposit and withdraw both succeed. This is just an assertion boundary issue.","design":"File: examples/vault.test.ts:352\nCurrent: expect(netLoss).toBeLessThan(10_000)\nFix: expect(netLoss).toBeLessThanOrEqual(10_000)\n\nAlternatively, increase the threshold slightly to account for fee variation.","acceptance_criteria":"- [ ] Full cycle test passes\n- [ ] Assertion allows for actual transaction fee costs","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-06T14:08:07.911410506+01:00","updated_at":"2025-11-06T14:29:01.852477757+01:00","closed_at":"2025-11-06T14:29:01.852477757+01:00"}
{"id":"zignocchio-4ac3","content_hash":"cd31f5250261971d53d1526b43069d524fa4a9bf1f852cde19a9ed2d3c91c63c","title":"Configure 4KB BPF stack size in build system","description":"Currently bpfel-freestanding target uses LLVM's default 512-byte BPF stack limit, but Solana's sBPF runtime supports 4KB stacks. Investigate and implement a way to pass -bpf-stack-size=4096 to LLVM during compilation, either through Zig build flags or by modifying the build.zig to use LLVM directly. This will allow more complex CPI operations without requiring aggressive inlining optimizations.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T19:01:17.041740294+01:00","updated_at":"2025-11-06T19:31:52.507318596+01:00","closed_at":"2025-11-06T19:31:52.507333964+01:00"}
{"id":"zignocchio-4f34","content_hash":"a111ed59c9a82adadcb7af3fda7b2114fb14ea6ffaf04521a60c6cd981733c44","title":"Implement SyncNative instruction","description":"Create token/instructions/sync_native.zig implementing SyncNative (discriminator=17). Updates native token account balance to match wrapped SOL lamports. Accounts: account (writable).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T16:20:49.399418036+01:00","updated_at":"2025-11-07T11:57:33.708555616+01:00","closed_at":"2025-11-07T11:57:33.708555616+01:00","dependencies":[{"issue_id":"zignocchio-4f34","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T16:20:49.401117411+01:00","created_by":"daemon"},{"issue_id":"zignocchio-4f34","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T16:20:49.402335718+01:00","created_by":"daemon"}]}
{"id":"zignocchio-5123","content_hash":"acf017f1ba4401eed03d35d5cfe2977bf6185fd509d9f4c8c31ea6a3c35d21e8","title":"Implement CloseAccount instruction","description":"Create token/instructions/close_account.zig implementing CloseAccount (discriminator=9). Accounts: account (writable), destination (writable), owner (signer). Transfers remaining lamports to destination and zeros account data.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T15:27:02.440770648+01:00","updated_at":"2025-11-06T18:38:25.414810036+01:00","closed_at":"2025-11-06T18:38:25.414810036+01:00","dependencies":[{"issue_id":"zignocchio-5123","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:27:02.442525728+01:00","created_by":"daemon"},{"issue_id":"zignocchio-5123","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T15:27:02.443693962+01:00","created_by":"daemon"}]}
{"id":"zignocchio-60c4","content_hash":"f9c988f55178a637c798b80a9b44d54539ceb485f81358b90f3284648384263b","title":"Fix SDK PDA functions to avoid aggregate returns","description":"sBPF doesn't support returning structs. findProgramAddress returns struct { Pubkey, u8 } which causes linker error. Need to change to output parameters.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T12:36:40.63596558+01:00","updated_at":"2025-11-06T12:37:44.201605325+01:00","closed_at":"2025-11-06T12:37:44.201605325+01:00","dependencies":[{"issue_id":"zignocchio-60c4","depends_on_id":"zignocchio-3e4d","type":"blocks","created_at":"2025-11-06T12:36:46.953562725+01:00","created_by":"daemon"}]}
{"id":"zignocchio-6780","content_hash":"9175e4f6d76c31547c1e65bb2fe76e22d597c2e55f151980eb13d46c8afed20a","title":"Implement vault example with deposit/withdraw instructions","description":"Create examples/vault/ with lib.zig, deposit.zig, and withdraw.zig implementing a PDA-based lamport vault with CPI to System Program","design":"Vault structure:\\n- lib.zig: Main entrypoint with instruction routing (discriminators 0=Deposit, 1=Withdraw)\\n- deposit.zig: Handles deposits with amount validation and CPI transfer\\n- withdraw.zig: Handles withdrawals with PDA signing","acceptance_criteria":"- [x] Created examples/vault/ directory structure\\n- [x] Implemented deposit.zig instruction\\n- [x] Implemented withdraw.zig instruction\\n- [x] Implemented lib.zig entrypoint\\n- [x] Created vault.test.ts test file\\n- [ ] Vault program builds successfully\\n- [ ] Tests pass","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T09:41:04.441802884+01:00","updated_at":"2025-11-06T12:38:43.410538512+01:00","closed_at":"2025-11-06T12:38:43.410538512+01:00","dependencies":[{"issue_id":"zignocchio-6780","depends_on_id":"zignocchio-fa8c","type":"parent-child","created_at":"2025-11-06T09:53:36.882869528+01:00","created_by":"daemon"}]}
{"id":"zignocchio-6f4e","content_hash":"b75a5e6d4ea954bdb2bf8d5882fcde5cb4fd9c0859b7a04338afdbb5d87cd26f","title":"Add SPL Token support to zignocchio SDK","description":"Implement SPL Token program support in the zignocchio SDK, mirroring the functionality provided by pinocchio-token. This includes state deserialization structures (Mint, TokenAccount), instruction builders for all major token operations (transfer, mint, burn, etc.), and example programs demonstrating token usage.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-06T15:23:22.900693823+01:00","updated_at":"2025-11-06T15:23:32.147658736+01:00","dependencies":[{"issue_id":"zignocchio-6f4e","depends_on_id":"zignocchio-4ac3","type":"blocks","created_at":"2025-11-06T19:01:32.58390173+01:00","created_by":"daemon"},{"issue_id":"zignocchio-6f4e","depends_on_id":"zignocchio-364c","type":"blocks","created_at":"2025-11-06T19:09:52.690653002+01:00","created_by":"daemon"}]}
{"id":"zignocchio-75df","content_hash":"2e567880339b9f59e175e784e254305f97a539df1021da9da00979945ad5c5cd","title":"Implement Revoke instruction","description":"Create token/instructions/revoke.zig implementing Revoke (discriminator=5). Removes delegate authority from token account. Accounts: source (writable), owner (signer).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T16:19:59.990397186+01:00","updated_at":"2025-11-07T11:59:47.640218474+01:00","closed_at":"2025-11-07T11:59:47.640218474+01:00","dependencies":[{"issue_id":"zignocchio-75df","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T16:19:59.992260551+01:00","created_by":"daemon"},{"issue_id":"zignocchio-75df","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T16:19:59.993159687+01:00","created_by":"daemon"}]}
{"id":"zignocchio-7acb","content_hash":"dd7f25a9acfc3fa26ae8c18a923c90987bfa5a5f2b54f002b6bc6f71b8e7efb7","title":"CRITICAL: Global constant references crash BPF runtime","description":"Root cause of TOKEN_PROGRAM_ID crash: LLVM BPF backend cannot handle Zig global const references. Workaround: use inline function tokenProgramId() instead of \u0026TOKEN_PROGRAM_ID. See OPEN_ISSUES.md for full details. Test handler passes with workaround.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T21:05:16.760538028+01:00","updated_at":"2025-11-06T22:16:38.571525885+01:00","closed_at":"2025-11-06T22:16:38.571525885+01:00"}
{"id":"zignocchio-7aea","content_hash":"9e892e39577974d7f2a5aa8c149a159132a314b3305b2b236a9b7f5824879adc","title":"Document vault example and CPI implementation patterns","description":"Create comprehensive documentation of the vault implementation including the sBPF constraints discovered (no aggregate returns, CPI issues) and patterns for working around them.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T12:40:54.868790995+01:00","updated_at":"2025-11-06T15:18:12.083939799+01:00","closed_at":"2025-11-06T15:18:12.083939799+01:00","dependencies":[{"issue_id":"zignocchio-7aea","depends_on_id":"zignocchio-0b0e","type":"blocks","created_at":"2025-11-06T12:40:54.871348451+01:00","created_by":"daemon"}]}
{"id":"zignocchio-8c15","content_hash":"256e786fbb1b05a56e3b578e11d15283fc59de5a3cce96d525aeb69b2054ddb8","title":"Implement Transfer instruction","description":"Create token/instructions/transfer.zig implementing the Transfer instruction builder. Accounts: source (writable), destination (writable), authority (signer). Instruction data: discriminator=3, amount (u64). Support both invoke() and invokeSigned() methods.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T15:25:40.456627189+01:00","updated_at":"2025-11-06T18:31:45.702637291+01:00","closed_at":"2025-11-06T18:31:45.702637291+01:00","dependencies":[{"issue_id":"zignocchio-8c15","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:25:40.458623986+01:00","created_by":"daemon"},{"issue_id":"zignocchio-8c15","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T15:25:40.460113115+01:00","created_by":"daemon"}]}
{"id":"zignocchio-8eca","content_hash":"487d9f34b9c1b3fd130b97e0d51db100641df09535be784e8809c289beed073c","title":"Fix SDK CPI and PDA type issues","description":"SDK had several type issues preventing CPI usage: Instruction struct marked extern with slices, ProgramResult vs ProgramError confusion in return types","design":"Changes made:\\n1. Removed extern from cpi.Instruction struct (can't have slices in extern)\\n2. Changed invoke/invokeSigned return type from ProgramResult\\!void to ProgramResult\\n3. Changed findProgramAddress/createProgramAddress return to use ProgramError\\! instead of ProgramResult\\!\\n4. Fixed syscall pointer casts in findProgramAddress","acceptance_criteria":"- [x] Instruction struct no longer extern\\n- [x] CPI functions return ProgramResult\\n- [x] PDA functions return ProgramError\\!\\n- [x] Vault example compiles to bitcode","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T09:41:16.200886961+01:00","updated_at":"2025-11-06T09:41:30.800422034+01:00","closed_at":"2025-11-06T09:41:30.800422034+01:00"}
{"id":"zignocchio-9415","content_hash":"86f8456c6859ca9c9ccaa0d3cc1ca55c254f5d80c81077a0f714b144496e7be0","title":"Implement InitializeAccount instructions","description":"Create token/instructions/initialize_account.zig with three variants: InitializeAccount (discriminator=1), InitializeAccount2 (discriminator=16), InitializeAccount3 (discriminator=18). InitializeAccount2 and 3 embed owner in instruction data instead of requiring rent sysvar. Match pinocchio-token patterns.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T15:26:57.635835172+01:00","updated_at":"2025-11-06T18:30:46.047002192+01:00","closed_at":"2025-11-06T18:30:46.047002192+01:00","dependencies":[{"issue_id":"zignocchio-9415","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:26:57.637794879+01:00","created_by":"daemon"},{"issue_id":"zignocchio-9415","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T15:26:57.638705406+01:00","created_by":"daemon"}]}
{"id":"zignocchio-9942","content_hash":"872d4d32168f98d369dd3979730081dd97b5cb9b529647d88df7f1037b265b65","title":"Implement Freeze and Thaw instructions","description":"Create token/instructions/freeze.zig with FreezeAccount (discriminator=10) and ThawAccount (discriminator=11). Freeze prevents transfers, thaw enables them. Accounts: account (writable), mint, freeze_authority (signer).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T16:20:28.105507231+01:00","updated_at":"2025-11-07T11:59:47.629936835+01:00","closed_at":"2025-11-07T11:59:47.629936835+01:00","dependencies":[{"issue_id":"zignocchio-9942","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T16:20:28.107129621+01:00","created_by":"daemon"},{"issue_id":"zignocchio-9942","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T16:20:28.10798296+01:00","created_by":"daemon"}]}
{"id":"zignocchio-a3dc","content_hash":"e73f1e6b003d491ee285e4bf9724667b9725c34003d8361c642f1cfb33baace2","title":"Implement InitializeMint instructions","description":"Create token/instructions/initialize_mint.zig with InitializeMint (discriminator=0) and InitializeMint2 (discriminator=20). Both take decimals, mint_authority, optional freeze_authority. InitializeMint requires rent sysvar, InitializeMint2 does not.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T15:27:16.095243472+01:00","updated_at":"2025-11-06T18:29:14.90888994+01:00","closed_at":"2025-11-06T18:29:14.90888994+01:00","dependencies":[{"issue_id":"zignocchio-a3dc","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:27:16.097015344+01:00","created_by":"daemon"},{"issue_id":"zignocchio-a3dc","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T15:27:16.097921764+01:00","created_by":"daemon"}]}
{"id":"zignocchio-b08e","content_hash":"fbd59bd97731d4b9ad20e8a969aafe0fe12b607d0f0fd5861df6fb86097d4e48","title":"Restructure examples to use directories","description":"Move hello.zig and counter.zig into examples/hello/lib.zig and examples/counter/lib.zig directories for consistency with vault structure","acceptance_criteria":"- [x] hello moved to examples/hello/lib.zig\\n- [x] counter moved to examples/counter/lib.zig\\n- [x] Build system updated to use directory structure\\n- [x] Module imports fixed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T09:40:02.298185709+01:00","updated_at":"2025-11-06T09:41:02.489929765+01:00","closed_at":"2025-11-06T09:41:02.489929765+01:00"}
{"id":"zignocchio-b7f8","content_hash":"168e15acdc33c66e5bd43c892bf1c3dd9a76c51d2c2ecfbbcf3a102ab13aa9fc","title":"Implement SetAuthority instruction","description":"Create token/instructions/set_authority.zig implementing SetAuthority (discriminator=6). Changes mint or token account authorities. Accounts: owned (writable), current_authority (signer). Instruction data includes AuthorityType enum and optional new_authority pubkey.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T16:20:45.419887784+01:00","updated_at":"2025-11-07T11:59:40.166353466+01:00","closed_at":"2025-11-07T11:59:40.166353466+01:00","dependencies":[{"issue_id":"zignocchio-b7f8","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T16:20:45.422042618+01:00","created_by":"daemon"},{"issue_id":"zignocchio-b7f8","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T16:20:45.423320237+01:00","created_by":"daemon"}]}
{"id":"zignocchio-d61a","content_hash":"9d15a51a4f3300e1d7fe9863b499d5744b2575f663cad6d733b508712cb6cafe","title":"Create token-vault example","description":"Create examples/token-vault/ demonstrating a vault program that manages SPL token deposits and withdrawals. Similar to the SOL vault example but using token accounts. Include: TypeScript test setup, vault PDA for token storage, deposit instruction (transfers tokens from user to vault), withdraw instruction (transfers tokens from vault back to user using PDA signing).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T16:21:30.732613884+01:00","updated_at":"2025-11-06T19:00:02.588805366+01:00","closed_at":"2025-11-06T19:00:02.588805366+01:00","dependencies":[{"issue_id":"zignocchio-d61a","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T16:21:30.734231404+01:00","created_by":"daemon"},{"issue_id":"zignocchio-d61a","depends_on_id":"zignocchio-8c15","type":"blocks","created_at":"2025-11-06T16:21:30.735175956+01:00","created_by":"daemon"}]}
{"id":"zignocchio-e636","content_hash":"384c431847df09a90accc03c176c1d748f24db75dedb00fbc1bf5b8e3d660a7c","title":"Implement token program constants and basic types","description":"Create token/mod.zig with SPL Token program ID constant and basic type definitions. Define AccountState enum (Uninitialized, Initialized, Frozen) to match the SPL Token standard.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T15:25:20.649143982+01:00","updated_at":"2025-11-06T16:36:27.840707111+01:00","closed_at":"2025-11-06T16:36:27.840707111+01:00","dependencies":[{"issue_id":"zignocchio-e636","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:25:20.651266986+01:00","created_by":"daemon"}]}
{"id":"zignocchio-f23b","content_hash":"c9eefe12ba6014ac05fcef313f372926737bfa600281d5634247f745830cd214","title":"Implement Burn and BurnChecked instructions","description":"Create token/instructions/burn.zig with Burn (discriminator=8) and BurnChecked (discriminator=15). Accounts: account (writable), mint (writable), authority (signer). BurnChecked adds decimals validation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T15:27:22.349595937+01:00","updated_at":"2025-11-06T18:37:16.179999719+01:00","closed_at":"2025-11-06T18:37:16.179999719+01:00","dependencies":[{"issue_id":"zignocchio-f23b","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:27:22.351822006+01:00","created_by":"daemon"},{"issue_id":"zignocchio-f23b","depends_on_id":"zignocchio-e636","type":"blocks","created_at":"2025-11-06T15:27:22.352822202+01:00","created_by":"daemon"}]}
{"id":"zignocchio-fa8c","content_hash":"380e31dc45a0eb8982a57d5f62a1410f9aaef6578e7fd9bae9300ac5e13b098a","title":"Extend zignocchio examples to include vault","description":"Add a vault example to zignocchio that demonstrates PDA-based vault operations and Cross-Program Invocation (CPI) to System Program. The main purpose is to test and showcase CPI capabilities.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-11-06T09:39:49.710127495+01:00","updated_at":"2025-11-06T12:38:44.029925451+01:00","closed_at":"2025-11-06T12:38:44.029925451+01:00"}
{"id":"zignocchio-fc56","content_hash":"3540fbc39b512f33436efc88e603695e686cfbd5267edd821794b4309377b969","title":"Implement Mint state structure","description":"Create token/mint.zig with Mint struct matching SPL Token layout. Include methods: fromAccountInfo, mintAuthority, supply, decimals, isInitialized, freezeAuthority. Match pinocchio-token memory layout exactly (82 bytes).","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T15:25:22.702325415+01:00","updated_at":"2025-11-06T17:08:20.886020448+01:00","closed_at":"2025-11-06T17:08:20.886020448+01:00","dependencies":[{"issue_id":"zignocchio-fc56","depends_on_id":"zignocchio-6f4e","type":"blocks","created_at":"2025-11-06T15:25:22.704159505+01:00","created_by":"daemon"}]}
